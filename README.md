# Django Docker PostgreSQL NGINX Demo

This is a demo project that shows how to deploy a Django application using Docker and connect it to a PostgreSQL database running in another container. Additionally, an NGINX web server is set up in a separate container to serve the Django application.

## Requirements

- Docker
- Docker Compose

## Docker Compose Configuration

The `docker-compose.yml` file defines three services: `web`, `db`, and `nginx`.

```yaml
version: '3'

services:
  web:
    build: ./mySampleProject
    command: gunicorn mySampleProject.wsgi:application --bind 0.0.0.0:8001
    volumes:
      - ./mySampleProject:/code
      - static_volume:/code/staticfiles
    ports:
      - "8001:8001"
    expose: [8001]
    env_file:
      - ./.env
    depends_on:
      - db
  db:
    image: postgres:13.0-alpine
    volumes:
      - postgres_data:/var/lib/postgresql/data/
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: psqlpass123
      POSTGRES_DB: djangodb
  nginx:
    build: ./nginx
    ports:
      - 8000:8000
    depends_on:
      - web
    volumes:
      - static_volume:/code/staticfiles

volumes:
  postgres_data:
  static_volume:
```

## Usage Instructions

1. Clone the Repository

```sh
git clone https://github.com/leoamato/Sample-Django-deploy.git
cd Sample-Django-deploy
```

2. Build and Run the Containers

```sh
docker-compose up --build
```

3. Access the Application

* The Django application will be available at http://localhost:8001.
* The Nginx server will be available at http://localhost:8000.

## Explanation of the Services

### NGINX Container:

A container running an NGINX web server is created, which listens on port 8000. This server is configured to serve the Django application and handle static files.

### PostgreSQL Container:

A container running PostgreSQL is created. The credentials for the database are added in the docker-compose.yml file and the .env file. The environment variables are set to configure the PostgreSQL database.

* SQL_ENGINE=django.db.backends.postgresql
* SQL_DATABASE=djangodb
* SQL_USER=postgres
* SQL_PASSWORD=psqlpass123
* SQL_HOST=db
* SQL_PORT=5432

### Django Container:

Another container is created for the Django project. The static files are generated by running python manage.py collectstatic and are served by the NGINX container.

## Volumes

* postgres_data: Stores PostgreSQL data.
* static_volume: Stores Django static files.

Thank you for using this demo project! If you have any questions or suggestions, feel free to open an issue or submit a pull request.
